<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Kubernetes on Coreos - Je pense donc je suis</title>
  <meta property="og:title" content="Kubernetes on Coreos" />
  <meta name="twitter:title" content="Kubernetes on Coreos" />
  <meta name="description" content="Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
 I just follow the guide of CoreOS &#43; Kubernetes Step By Step to deploy Kubernetes cluster on CoreOS.
Although this guide is detailed, there&rsquo;s still something that will cause misunderstanding and should be paid close attention to. So this post is to help you better follow the guide and setup Kubernetes.
First of all, according to CoreOS cluster architectures, the CoreOS &#43; Kubernetes Step By Step guide is for Easy development/testing cluster or Production cluster with central services, however, what I have is a Small cluster which was set up in the way Setup CoreOS Cluster with Static IPs, that will make some difference to ETCD_ENDPOINTS environment variable.">
  <meta property="og:description" content="Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
 I just follow the guide of CoreOS &#43; Kubernetes Step By Step to deploy Kubernetes cluster on CoreOS.
Although this guide is detailed, there&rsquo;s still something that will cause misunderstanding and should be paid close attention to. So this post is to help you better follow the guide and setup Kubernetes.
First of all, according to CoreOS cluster architectures, the CoreOS &#43; Kubernetes Step By Step guide is for Easy development/testing cluster or Production cluster with central services, however, what I have is a Small cluster which was set up in the way Setup CoreOS Cluster with Static IPs, that will make some difference to ETCD_ENDPOINTS environment variable.">
  <meta name="twitter:description" content="Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
 I just follow the guide of CoreOS &#43; Kubernetes Step By Step to deploy Kubernetes …">
  <meta name="author" content="Wenfeng Gao"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Je pense donc je suis",
    
    "url": "https://wenfeng-gao.github.io/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https://wenfeng-gao.github.io/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://wenfeng-gao.github.io/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://wenfeng-gao.github.io/post/kubernetes-on-coreos/",
          "name": "Kubernetes on coreos"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Wenfeng Gao"
  },
  "headline": "Kubernetes on Coreos",
  "description" : "Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
 I just follow the guide of CoreOS &#43; Kubernetes Step By Step to deploy Kubernetes cluster on CoreOS.
Although this guide is detailed, there&amp;rsquo;s still something that will cause misunderstanding and should be paid close attention to. So this post is to help you better follow the guide and setup Kubernetes.
First of all, according to CoreOS cluster architectures, the CoreOS &#43; Kubernetes Step By Step guide is for Easy development/testing cluster or Production cluster with central services, however, what I have is a Small cluster which was set up in the way Setup CoreOS Cluster with Static IPs, that will make some difference to ETCD_ENDPOINTS environment variable.",
  "inLanguage" : "en",
  "wordCount": 260,
  "datePublished" : "2017-06-13T18:22:48",
  "dateModified" : "2017-06-13T18:22:48",
  "image" : "https://wenfeng-gao.github.io/img/avatar-icon.png",
  "keywords" : [ "coreos, docker, k8s" ],
  "mainEntityOfPage" : "https://wenfeng-gao.github.io/post/kubernetes-on-coreos/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https://wenfeng-gao.github.io/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https://wenfeng-gao.github.io/img/avatar-icon.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Kubernetes on Coreos" />
<meta property="og:description" content="Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
 I just follow the guide of CoreOS &#43; Kubernetes Step By Step to deploy Kubernetes cluster on CoreOS.
Although this guide is detailed, there&rsquo;s still something that will cause misunderstanding and should be paid close attention to. So this post is to help you better follow the guide and setup Kubernetes.
First of all, according to CoreOS cluster architectures, the CoreOS &#43; Kubernetes Step By Step guide is for Easy development/testing cluster or Production cluster with central services, however, what I have is a Small cluster which was set up in the way Setup CoreOS Cluster with Static IPs, that will make some difference to ETCD_ENDPOINTS environment variable.">
<meta property="og:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
<meta property="og:url" content="https://wenfeng-gao.github.io/post/kubernetes-on-coreos/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Je pense donc je suis" />
  <meta name="twitter:title" content="Kubernetes on Coreos" />
  <meta name="twitter:description" content="Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
 I just follow the guide of CoreOS &#43; Kubernetes Step By Step to deploy Kubernetes …">
  <meta name="twitter:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://wenfeng-gao.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
  <meta name="twitter:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://wenfeng-gao.github.io/post/kubernetes-on-coreos/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Je pense donc je suis" />

  <meta name="generator" content="Hugo 0.54.0" />
  <link rel="alternate" href="https://wenfeng-gao.github.io/index.xml" type="application/rss+xml" title="Je pense donc je suis">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://wenfeng-gao.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://wenfeng-gao.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://wenfeng-gao.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92434611-1', 'auto');
  ga('send', 'pageview');
</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2394a408cca2a9e611801f76b5dc0267";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://wenfeng-gao.github.io/">Je pense donc je suis</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Je pense donc je suis" href="https://wenfeng-gao.github.io/">
            <img class="avatar-img" src="https://wenfeng-gao.github.io/img/avatar-icon.png" alt="Je pense donc je suis" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Kubernetes on Coreos</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on June 13, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;260&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<blockquote>
<p>Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.</p>
</blockquote>

<p>I just follow the guide of <a href="https://coreos.com/kubernetes/docs/latest/getting-started.html">CoreOS + Kubernetes Step By Step</a>
to deploy <a href="http://kubernetes.io/">Kubernetes</a> cluster on CoreOS.</p>

<p>Although this guide is detailed, there&rsquo;s still something that will cause
misunderstanding and should be paid close attention to. So this post is to
help you better follow the guide and setup Kubernetes.</p>

<p>First of all, according to <a href="https://coreos.com/os/docs/latest/cluster-architectures.html">CoreOS cluster architectures</a>,
the <a href="https://coreos.com/kubernetes/docs/latest/getting-started.html">CoreOS + Kubernetes Step By Step</a>
guide is for <em>Easy development/testing cluster</em> or <em>Production cluster with central services</em>,
however, what I have is a <em>Small cluster</em> which was set up in the way
<a href="http://wenfeng-gao.github.io/2016/06/08/setup-coreos-cluster-with-static-ip.html">Setup CoreOS Cluster with Static IPs</a>,
that will make some difference to <em>ETCD_ENDPOINTS</em> environment variable.</p>

<h3 id="etcd-endpoints">ETCD_ENDPOINTS</h3>

<p>For each node, the <em>ETCD_ENDPOINTS</em> is <code>http://&lt;node-routable-ip&gt;:2379</code>. Don&rsquo;t
forget <code>http://</code>, it won&rsquo;t work without this token.</p>

<h3 id="gcr-io">gcr.io</h3>

<p>If you&rsquo;re in China, thanks to the GFW service, you&rsquo;re not able to connect
<em>gcr.io</em> to download <code>gcr.io/google_containers/pause</code> image. So maybe you need
proxy for Docker.</p>

<p>So add a <code>unit</code> in your <code>cloud-config</code> file.</p>

<pre><code>- name: docker.service
  drop-ins:
    - name: 20-http-proxy.conf
      content: |
        [Service]
        Environment=&quot;HTTP_PROXY=http://www-proxy.ericsson.se:8080&quot;
        Environment=&quot;HTTPS_PROXY=http://www-proxy.ericsson.se:8080&quot;
  command: restart
</code></pre>

<p>Change <code>http://www-proxy.ericsson.se:8080</code> to your own proxy server url.</p>

<h3 id="journalctl">journalctl</h3>

<p>Sometimes the <em>active</em> status of <code>systemctl status</code> won&rsquo;t indicate everything
goes well, you may need</p>

<pre><code>    sudo journalctl -f -t &lt;some-service&gt;
</code></pre>

<p>or</p>

<pre><code>    sudo journalctl -f -u &lt;some-service&gt;
</code></pre>

<p>or just</p>

<pre><code>    sudo journalctl -ex
</code></pre>

<p>These commands will help you find what&rsquo;s going wrong, and in most cases, you
just need to be <strong>patient</strong>, because downloading takes time specially the first
time you deploy.</p>

<p>Hope this helps.</p>


        
          <div class="blog-tags">
            
              <a href="https://wenfeng-gao.github.io//tags/coreos/">coreos</a>&nbsp;
            
              <a href="https://wenfeng-gao.github.io//tags/docker/">docker</a>&nbsp;
            
              <a href="https://wenfeng-gao.github.io//tags/k8s/">k8s</a>&nbsp;
            
          </div>
        

        

        
          
          
          <h4 class="see-also">See also</h4>
          <ul>
          
            <li><a href="/post/setup-coreos-cluster-with-static-ip/">Setup Coreos Cluster With Static Ip</a></li>
          
            <li><a href="/post/deploy-worldpress-in-coreos-cluster-using-fleet/">Deploy Worldpress in Coreos Cluster Using Fleet</a></li>
          
            <li><a href="/post/setup-coreos-cluster-in-virtualbox/">Setup Coreos Cluster Manually with Virtualbox</a></li>
          
          </ul>
          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://wenfeng-gao.github.io/post/setup-coreos-cluster-with-static-ip/" data-toggle="tooltip" data-placement="top" title="Setup Coreos Cluster With Static Ip">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://wenfeng-gao.github.io/post/a-ping-question/" data-toggle="tooltip" data-placement="top" title="A Ping Question">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          
          <div class="disqus-comments">                  
            <button id="show-comments" class="btn btn-default" type="button">Show <span class="disqus-comment-count" data-disqus-url="https://wenfeng-gao.github.io/post/kubernetes-on-coreos">comments</span></button>
            <div id="disqus_thread"></div>

            <script type="text/javascript">
              var disqus_config = function () {
              this.page.url = 'https:\/\/wenfeng-gao.github.io\/post\/kubernetes-on-coreos';
            };

          </script>
          </div>
          
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:elricfeng@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://plus.google.com/103999582027187063854" title="Google&#43;">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-google-plus fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/Wenfeng-GAO" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/4262814/wenfeng" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://paypal.me/elricfeng" title="PayPal">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-paypal fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="https://wenfeng-gao.github.io/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Wenfeng Gao
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2019
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://wenfeng-gao.github.io/">Je pense donc je suis</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.54.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://wenfeng-gao.github.io/js/main.js"></script>
<script src="https://wenfeng-gao.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://wenfeng-gao.github.io/js/load-photoswipe.js"></script>







<script type="text/javascript">
$(function(){
  $('#show-comments').on('click', function(){
    var disqus_shortname = 'https-wenfeng-gao-github-io';
      
    (function() {
      var disqus = document.createElement('script'); 
      disqus.type = 'text/javascript'; 
      disqus.async = true;
      disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
    })();
      
    $(this).hide(); 
    });
  });
      
</script>
<script id="dsq-count-scr" src="//https-wenfeng-gao-github-io.disqus.com/count.js" async></script>




  </body>
</html>

