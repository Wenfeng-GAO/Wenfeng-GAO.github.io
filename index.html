<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Je pense donc je suis - Je pense donc je suis</title>
  <meta property="og:title" content="Je pense donc je suis" />
  <meta name="twitter:title" content="Je pense donc je suis" />
  <meta name="author" content="Wenfeng Gao"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Je pense donc je suis",
    
    "url": "https://wenfeng-gao.github.io/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https://wenfeng-gao.github.io/"
  
  
  
  
}
</script>

<meta property="og:title" content="Je pense donc je suis" />
<meta property="og:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
<meta property="og:url" content="https://wenfeng-gao.github.io/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Je pense donc je suis" />
  <meta name="twitter:title" content="Je pense donc je suis" />
  <meta name="twitter:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://wenfeng-gao.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
  <meta name="twitter:image" content="https://wenfeng-gao.github.io/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://wenfeng-gao.github.io/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Je pense donc je suis" />

  <meta name="generator" content="Hugo 0.54.0" />
  <link rel="alternate" href="https://wenfeng-gao.github.io/index.xml" type="application/rss+xml" title="Je pense donc je suis">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://wenfeng-gao.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://wenfeng-gao.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://wenfeng-gao.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://wenfeng-gao.github.io/">Je pense donc je suis</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Je pense donc je suis" href="https://wenfeng-gao.github.io/">
            <img class="avatar-img" src="https://wenfeng-gao.github.io/img/avatar-icon.png" alt="Je pense donc je suis" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="page-heading">
              
                <h1>Je pense donc je suis</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
  <div role="main" class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        

        <div class="posts-list">
          
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/k8s_cpumanager_source_code/">
                <h2 class="post-title">Kubernetes源码分析之CPU Manager</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on November 28, 2018
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;6&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1194&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  背景 Kubelet默认使用CFS Quota/Share的方式来实现Pod的CPU层面约束，而对于cpuset的支持，通过很长一段时间的讨论（[Issue] Determine if we should support cpuset-cpus and cpuset-mem)后，最终通过CPU Manager来实现。
CPU Manager作为alpha版本从v1.8开始出现，自v1.10开始作为beta版本默认开启。
使用方式 v1.10版本前需要开启feature-gate。
--feature-gates=CPUManager=true  开启cpuset还需要一些cpumanager的参数设置
--cpu-manager-policy=static --cpu-manager-reconcile-period=10s / Optional, default same as `--node-status-update-frequency`  还需要设置cpu reservation，可以通过
--kube-reserved // or --system-reserved  源码分析 Start CPU Manager 在kubelet启动之时，cpuManager会被生成，并Start。此时，cpuManager已经获取了所在宿主机的cpu拓扑结构，并且另起goroutine每隔reconcilePeriod时间，对宿主机上所有的activePods做一次reconcile。
kubelet.go
// initializeModules will initialize internal modules that do not require the container runtime to be up. // Note that the modules here must not depend on modules that are not initialized here.
                  <a href="https://wenfeng-gao.github.io/post/k8s_cpumanager_source_code/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/k8s/">k8s</a>&nbsp;
                  
                    <a href="https://wenfeng-gao.github.io//tags/k8s-kubelet/">k8s-kubelet</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/core-dump-file-size-limit-in-docker/">
                <h2 class="post-title">Core Dump File Size Limit in Docker</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on May 15, 2018
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;246&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  Background 工作中遇到这样一个问题，运行环境为Docker容器，由于设置了容器的磁盘大小，但是没有设置core dump file的大小（默认为unlimited），当程序收到SIGABRT信号退出时，磁盘容易被撑满。
所以决定不让其产生core dump file。那么问题来了，在Docker容器环境下，该如何实现？
以下记录了围绕这个目的所做的一些尝试与遇到的问题。
Try and try Method 1: 使用systemd [failed] Systemd&rsquo;s default behavior is to generate core dumps for all processes in /var/lib/systemd/coredump. This behavior can be overridden by creating a configuration snippet in the /etc/systemd/coredump.conf.d/ directory with the following content.
/etc/systemd/coredump.conf.d/custom.conf [Coredump] Storage=none  然后重载systemd的配置
systemctl daemon-reload  但是，结果是我们会得到一个诸如Failed to get D-Bus connection: Operation not permitted的error。根据14年的issue Failed to get D-Bus connection: No connection to service manager - CentOS 7 #7459，我们并不能在容器中直接使用systemctl，而是需要用我们自己的process manager（supervisor）来管理进程。
                  <a href="https://wenfeng-gao.github.io/post/core-dump-file-size-limit-in-docker/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/docker/">docker</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/coroutine-with-gevent/">
                <h2 class="post-title">Coroutine With Gevent</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on February 21, 2018
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;4&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;839&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  背景 工作中用到gevent。
 gevent是一个基于libev的并发库。它为各种并发和网络相关的任务提供了整洁的API。
 使用过程中，带着某些问题阅读了一部分源码，现在做一下总结与分享。
协程 Python通过yield与generator，能实现coroutine。举个栗子(更多更详细的例子请 参考this awesome presentation)：
&gt;&gt;&gt; def grep(pattern): ... print &quot;Looking for %s&quot; % pattern ... while True: ... line = (yield) ... if pattern in line: ... print line ... &gt;&gt;&gt; g = grep(&quot;python&quot;) &gt;&gt;&gt; g.next() Looking for python &gt;&gt;&gt; g.send(&quot;hello world&quot;) &gt;&gt;&gt; g.send(&quot;python generators rock!&quot;) python generators rock! &gt;&gt;&gt;  原本以为gevent会是对yield一些封装，了解后知道，在gevent里面，上下文切换通过 yielding来完成的，但其用到的主要模式是Greenlet， Greenlet是以C扩展模块形式接入Python的轻量级协程。Greenlet全部运行在主程序操作系统 的内部，但它们被协作式地调度。在任何时刻，只有一个协程在运行。
Greenlet 对于Greenlet，暂且不多说， 通过阅读官网的API，我们知道其主要是通过switch这个 方法来实现跳转的，switch如何实现的暂不做讨论，先贴上官网的例子混个脸熟：
from greenlet import greenlet def test1(): print 12 gr2.
                  <a href="https://wenfeng-gao.github.io/post/coroutine-with-gevent/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/python/">python</a>&nbsp;
                  
                    <a href="https://wenfeng-gao.github.io//tags/coroutine/">coroutine</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/python-yield-keyword/">
                <h2 class="post-title">Python Yield Keyword</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on February 6, 2018
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;4&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;774&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  Yield keyword is an important feature in Python language, in order to understand coroutine in Python, we need to understand yield and generator first. However, this feature also makes the Python newbies like me confused a lot, as there&rsquo;s no similar thing in Java or C language.
So in this post, I&rsquo;ll try to explain and conclude what the yield keyword does.
In fact, the same question was posed on stackoverflow, which gains 5951 votes.
                  <a href="https://wenfeng-gao.github.io/post/python-yield-keyword/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/python/">python</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/a-little-taste-on-react/">
                <h2 class="post-title">A Little Taste on React</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on December 6, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;3&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;455&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  I have some experience on Android development, and recently for some reason I want to try React Native. As the RN official tutorial said:
 So to understand the basic structure of a React Native app, you need to understand some of the basic React concepts, like JSX, components, state, and props.
 &ldquo;Maybe I should listen to this guy&rsquo;s suggestion&rdquo;, I said to myself, so I spent a week to understand what is React and how to use it.
                  <a href="https://wenfeng-gao.github.io/post/a-little-taste-on-react/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/react/">react</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/simple-commit-msg-hook/">
                <h2 class="post-title">Simple Commit-Msg for Git Hook</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on September 28, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;361&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  Although I am the only contributor of my own Github project, I still want my commit message to be tidier.
I wish all the commit messages will follow the pattern like:
[Example]: This is an Example. [Exercise]: This ia an Exercise. [Problem]: A problem solved. [Other]: Maybe a merge commit.  However, I usually remember to follow this pattern after the commit, that&rsquo;s really disappointed. So I decided to write a simple hook to prevent this kind of Amnesia.
                  <a href="https://wenfeng-gao.github.io/post/simple-commit-msg-hook/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/git/">git</a>&nbsp;
                  
                    <a href="https://wenfeng-gao.github.io//tags/shell/">shell</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/basic-shell-commands/">
                <h2 class="post-title">Basic Shell Commands</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on July 29, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;84&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  

<p>公司某个产品的测试环境比较复杂，它需要在 <em>OpenStack</em> 上创建3个节点，其中2个节点安装产品并实现高可用(HA)，第3个节点（TestAgent节点）与产品节点通过接收与发送数据包进行测试。</p>

<p>整个部署与测试流程都需要用Jenkins做自动化测试，而我的任务是将TestAgent节点移植到Docker容器中。用时一个多月，从熟悉源代码的部署与测试流程，到OpenStack的UI界面和CLI命令的基本使用，到OpenStack网络通信的基本理解，到Python的学习与使用(如使用pexpect通过ssh执行shell命令和脚本)， 到shell脚本的熟悉与使用，这个过程中爬过了许多大大小小的坑，也收获了很多东西，这里主要总结一下shell脚本的常用命令。</p>

<h2 id="if">if</h2>

<p><code>if TEST-COMMANDS; then CONSEQUENT-COMMANDS; fi</code></p>

<p>其中<code>TEST-COMMANDS</code>一般有3种情形：</p>

<ul>
<li><code>shell command</code>
如果它的返回状态为0，则执行<code>CONSEQUENT-COMMANDS</code></li>
<li>bracket <code>[]</code></li>
<li>double bracket <code>[[]]</code>
在方括号内都会做一些判断，如判断文件是否存在，<code>[ -f FILE ]</code>等等，而其两者的区别在于<code>[[]]</code>是<code>[]</code>的拓展，只支持与bash、zsh等几种shell，所以可移植性要差一些，不过如果不考虑移植性的问题，<code>[[]]</code>会更加简洁与可读，具体可以参考 <a href="http://stackoverflow.com/questions/669452/is-preferable-over-in-bash-scripts">StackOverFlow上的回答</a>以及<a href="http://mywiki.wooledge.org/BashFAQ/031">这篇文档</a>。</li>
</ul>

<p>有时简单的逻辑关系可以直接使用<code>&amp;&amp;</code>代替。</p>

<h2 id="grep">grep</h2>

<p><code>grep -rl “pattern” file</code> 返回含有“pattern”的文件名，<code>grep</code>常与<code>awk</code>或者<code>cut</code>一起使用，例如</p>

<ul>
<li><code>grep &quot;foo&quot; file.txt | awk '{print $1}'</code></li>
<li><code>grep &quot;/bin/bash&quot; /etc/passwd | cut -d':' -f1,6</code></li>
</ul>

<h2 id="sed">sed</h2>

<ul>
<li><code>sed -i 'pattern' file</code> 直接操作文件的内容而不是stdout</li>
<li><code>sed 's/hello/bonjour/' greetings.txt</code> 基本用法</li>
<li><code>sed  '/is beautiful/i Life' input</code> 在之前插入一行</li>
<li><code>sed  '/Hello/a World' input</code> 在之后增加一行</li>
<li><code>sed '/^\s*$/d'</code> 删除空白行</li>
</ul>

<h2 id="echo-with-color">echo with color</h2>

<ul>
<li><code>RED='\033[0;31m'</code></li>
<li><code>NC='\033[0m' # No Color</code></li>
<li><code>echo -e &quot;I ${RED}love${NC} Stack Overflow\n&quot;</code></li>
</ul>

                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/shell/">shell</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/a-ping-question/">
                <h2 class="post-title">A Ping Question</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on July 4, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;304&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  Recently, I focus on OpenStack things where an interesting network question comes out: If a host machine has multiple network interfaces, is it possible to ping all of them from another host?
To be clearer, we assume that Host A has a unique network interface 192.168.11.0/24, Host B has 2 interfaces: 192.168.125.0/24 and 192.168.126.0/24. Meanwhile, the 3 interfaces are connected by a router, as the graph illustrated.
If we look at the routing table of Host B, we&rsquo;ll find something like
                  <a href="https://wenfeng-gao.github.io/post/a-ping-question/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/network/">network</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/kubernetes-on-coreos/">
                <h2 class="post-title">Kubernetes on Coreos</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on June 13, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;260&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
 I just follow the guide of CoreOS + Kubernetes Step By Step to deploy Kubernetes cluster on CoreOS.
Although this guide is detailed, there&rsquo;s still something that will cause misunderstanding and should be paid close attention to. So this post is to help you better follow the guide and setup Kubernetes.
First of all, according to CoreOS cluster architectures, the CoreOS + Kubernetes Step By Step guide is for Easy development/testing cluster or Production cluster with central services, however, what I have is a Small cluster which was set up in the way Setup CoreOS Cluster with Static IPs, that will make some difference to ETCD_ENDPOINTS environment variable.
                  <a href="https://wenfeng-gao.github.io/post/kubernetes-on-coreos/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/coreos/">coreos</a>&nbsp;
                  
                    <a href="https://wenfeng-gao.github.io//tags/docker/">docker</a>&nbsp;
                  
                    <a href="https://wenfeng-gao.github.io//tags/k8s/">k8s</a>&nbsp;
                  
                </div>
              
            </article>
          
            <article class="post-preview">
              <a href="https://wenfeng-gao.github.io/post/setup-coreos-cluster-with-static-ip/">
                <h2 class="post-title">Setup Coreos Cluster With Static Ip</h2>
                
                
              </a>

              <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on June 8, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;255&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Wenfeng Gao
  
  
</span>


              <div class="post-entry">
                
                  We have talked about how to setup a CoreOS cluster in my previous post: Setup CoreOS Cluster Manually with VirtualBox. However, as we setup the cluster in VirtualBox, which uses DHCP as default, the etcd2 may not work when VM&rsquo;s IP changed.
So in this article I&rsquo;ll tell you how to upgrade your cluster and enable the VMs use static IPs instead of DHCP.
Setup Static IP First of all, make sure your cluster node VM uses the bridge connection type (as default), that will enable the connection between outer world, as we are not going to set IP tables.
                  <a href="https://wenfeng-gao.github.io/post/setup-coreos-cluster-with-static-ip/" class="post-read-more">[Read More]</a>
                
              </div>

              
                <div class="blog-tags">
                  
                    <a href="https://wenfeng-gao.github.io//tags/coreos/">coreos</a>&nbsp;
                  
                    <a href="https://wenfeng-gao.github.io//tags/docker/">docker</a>&nbsp;
                  
                </div>
              
            </article>
          
        </div>

        
          <ul class="pager main-pager">
            
            
              <li class="next">
                <a href="/page/2/">Older Posts &rarr;</a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:elricfeng@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://plus.google.com/103999582027187063854" title="Google&#43;">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-google-plus fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/Wenfeng-GAO" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/4262814/wenfeng" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://paypal.me/elricfeng" title="PayPal">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-paypal fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="https://wenfeng-gao.github.io/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Wenfeng Gao
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2019
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://wenfeng-gao.github.io/">Je pense donc je suis</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.54.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://wenfeng-gao.github.io/js/main.js"></script>
<script src="https://wenfeng-gao.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://wenfeng-gao.github.io/js/load-photoswipe.js"></script>







<script type="text/javascript">
$(function(){
  $('#show-comments').on('click', function(){
    var disqus_shortname = 'https-wenfeng-gao-github-io';
      
    (function() {
      var disqus = document.createElement('script'); 
      disqus.type = 'text/javascript'; 
      disqus.async = true;
      disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
    })();
      
    $(this).hide(); 
    });
  });
      
</script>
<script id="dsq-count-scr" src="//https-wenfeng-gao-github-io.disqus.com/count.js" async></script>




  </body>
</html>

